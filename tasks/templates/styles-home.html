<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  // Envío automático del formulario al cambiar el selector de Prioridad
  document.getElementById("prioridad").addEventListener("change", function() {
      this.form.submit();
  });

  // Envío automático del formulario al cambiar el selector de UR
  document.getElementById("ur-select").addEventListener("change", function() {
      this.form.submit();
  });

  // Envío automático del formulario al cambiar el selector de Ordenar
  document.getElementById("ordenar-por").addEventListener("change", function() {
      this.form.submit();
  });
</script>
<style>
.fas fa-caret-down{color:red !important;font-size:16px;}.footer{margin-top:44em !important;}.asigned{display:flex;align-items:center;flex-direction:column;background-color:#691c32;width:90%;margin:10px;padding:5px;color:#ccc;margin-left:20px;border-radius:5px}.priority-paragraph{font-weight:bold;margin-bottom:10px;}.alta-priority{color:#ff0000;}.media-priority{color:#8d7a0e;}.baja-priority{color:#3e7d00;}.card-container{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:30px;width:100%;height:90%;overflow-y:auto;margin-bottom:30px;}.estado{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-end;}.card{border-radius:8px;background-color:#e1c77b24;box-shadow:0 10px 10px rgba(0,0,0,0.1);width:550px;height:100%;padding:0;display:flex;flex-direction:column;justify-content:space-between;max-width:500px;max-height:700px;margin:15px;margin-bottom:0em;}.completado{display:flex;margin-left:2em;justify-content:space-evenly;flex-wrap:wrap;flex-direction:column-reverse;align-content:flex-end;margin-right:2em;}.scroll-content{max-height:100%;overflow-y:auto;}.card h3{margin:0;text-align:center;font-size:24px;}.card-body p{margin:5px 0;}.card-footer{text-align:center;}.card-header{background-color:#691c32;color:#e1e1e1;border:1px solid #7c7c7c;padding-bottom:1em;}.card-footer{background-color:#DDC9A3;}.search-form{display:flex;align-items:center;background-color:#f7f7f7;border:1px solid #e1e1e1;border-radius:4px;padding:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);}.container{max-width:100%;padding:0 15px;margin:0 auto;}.search-form{margin-top:0;margin-bottom:20px;display:flex;align-items:center;}.totals-card{margin-top:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}.search-form input[type="text"]{flex:1;border:none;padding:6px 10px;font-size:14px;outline:none;}.totals-card{background-color:#f5f5f5;border:1px solid #ccc;color:#0c0707;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);padding:10px;display:flex;justify-content:space-between;margin-top:-21px;}.totals-container{display:flex;flex-direction:column;align-items:center;}.total-label{margin:0;font-size:12px;}.total-value{margin:5px 0;font-weight:bold;font-size:18px;}.pdf{position:absolute;right:5px;border:none;color:#ccc;width:20px;}.search-form{display:flex;align-items:center;background-color:#f7f7f7;border:1px solid #e1e1e1;border-radius:4px;padding:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);margin-bottom:20px;}.search-form input[type="text"]{flex:1;border:none;padding:6px 10px;font-size:14px;outline:none;border-radius:4px;}#prioridad-select{margin-left:10px;border:none;padding:6px;font-size:14px;background-color:#f7f7f7;border-radius:4px;cursor:pointer;}@media (max-width:436px){#prioridad-select,#ordenar-por,#ur-select,.excell{display:none;}.card{width:561px;height:100%;max-height:804px;margin-bottom:0em;}.card-container{margin-bottom:231px;}.paginador{position:relative;top:-10em;}}
.tab.actives{background-color:#0e0d21;}.centered{display:flex;justify-content:center;align-items:center;text-align:center;margin:0 auto;}.buttons{display:flex;align-content:center;flex-wrap:wrap;justify-content:center;align-items:flex-end;flex-direction:row;margin-bottom:40px;}.archivo-style{width:90%;height:100%;margin-left:3em;border:1px solid #ccc;padding:10px;margin-bottom:10px;}.archivo-style input[type="file"]{width:100%;}.fa-chevron-up{font-size:25px;margin-bottom:6px;}.archivo-style label{font-size:16px;color:#333;}.archivo-style label::after{font-size:14px;color:#999;cursor:pointer;}.archivo-style label::after:hover{color:#777;}.archivo-style .input-group-btn{position:absolute;top:0;right:0;}.archivo-style .input-group-btn .btn{border:0;background-color:transparent;color:#4a5cff;font-size:16px;cursor:pointer;}.archivo-style .input-group-btn .btn i{font-size:20px;}.archivo-style .input-group-btn .btn:hover{color:#999;}.contenedor-archivos{padding:10px;border-radius:20px;border:.1px solid #333;border-bottom-color:#c03c3c}@media (max-width:436px){.tab-content{padding:0px;border:none;border-radius:10px;}.task-form{padding:0px;margin-bottom:10em;}body{font-size:12px;}h2,h3,h4,h5{font-size:13px;}.width-label{width:100%;}.actualizar{position:relative;top:5em;left:5em;}.task-detail-container{max-width:100%;margin:0 auto;padding:6px;border:0px solid #ccc;border-radius:7px;margin:0px;box-shadow:0 2px 4px rgba(0,0,0,0.1);}.buttons{display:none;width:24em;flex-direction:row;align-content:center;}}.mobile-menu-button{display:none;cursor:pointer;}@media (max-width:436px){.tabs{display:none;background-color:#f2f2f2;padding:10px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);position:fixed;top:0;right:0;bottom:0;width:70%;max-width:300px;overflow-y:auto;z-index:1000;}.mobile-menu-button{display:block;position:fixed;top:5em;right:0;font-size:16px;background-color:#c03c3c;color:aliceblue;padding-left:15px;padding-right:10px;border-top-left-radius:5px;border-bottom-left-radius:5px;cursor:pointer;z-index:1001;}.tabs.active{display:flex;flex-direction:column;align-items:center;top:11em;}.tab{padding:10px;margin:5px;cursor:pointer;background-color:#691c32;color:white;border-radius:5px;text-align:center;width:80%;max-width:200px;}.tab-content-item{display:none;padding:10px;border:1px solid #ccc;border-radius:5px;margin-top:10px;background-color:#fff;}.tab-content-item.active{display:block;}}
</style>


<!-- SCRIPT LLAMADAS -->
<script>
    // Función para mostrar una confirmación antes de completar
    function showCompleteConfirmation() {
      Swal.fire({
        title: '¿Estás seguro?',
        text: 'Una vez completada, la tarea ya no podrá ser modificada.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#28a745',
        cancelButtonColor: '#dc3545',
        confirmButtonText: 'Sí, Completar',
        cancelButtonText: 'Cancelar',
      }).then((result) => {
        if (result.isConfirmed) {
          document.getElementById('complete-form').submit();
        }
      });
    }


  document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const localStorageKey = 'activeTab';

    // Función para activar una pestaña
    function activateTab(tab) {
      const targetTab = tab.dataset.tab;
      tabs.forEach((tab) => tab.classList.remove('active'));
      tabContents.forEach((content) => content.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById(targetTab).classList.add('active');

      // Guarda la pestaña activa en localStorage
      localStorage.setItem(localStorageKey, targetTab);
    }

    // Asigna eventos a las pestañas
    tabs.forEach((tab) => {
      tab.addEventListener('click', () => {
        activateTab(tab);
      });
    });

    // Recupera la pestaña activa de localStorage al cargar la página
    const savedActiveTab = localStorage.getItem(localStorageKey);
    if (savedActiveTab) {
      const tabToActivate = document.querySelector(`[data-tab="${savedActiveTab}"]`);
      if (tabToActivate) {
        activateTab(tabToActivate);
      }
    }
  });

  function mostrarAlerta() {
          swal({
              title: "¿Estás seguro de guardar?",
              text: "",
              icon: "warning",
              buttons: true,
              dangerMode: true,
             
          })
          .then((confirmar) => {
              if (confirmar) {
                swal("¡Se han guardado los cambios!", {
                      icon: "success",
                      buttons: false,
                  });

                     setTimeout(function() {
                    document.getElementById('form_detail').submit();
                    swal("¡Se han guardado los cambios!", {
                        icon: "success",
                    });
                }, 2000);
                 
              } else {
                  swal("No se han realizado cambios.");
              }
          });
      }
</script>
